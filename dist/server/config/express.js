/**
 * Created by Justin on 9/2/16.
 */
"use strict";
const _1 = require('../');
const serveStatic = require('serve-static');
let bodyParser = require('body-parser'), morgan = require('morgan');
/**
 * Configures Express middleware
 * @constructor
 */
function ExpressConfig() {
    _1.app.expressApp.use(bodyParser.json());
    _1.app.expressApp.use(bodyParser.urlencoded({ extended: true }));
    // Serve static files both from /src/client and /dist/client
    _1.app.expressApp.use(serveStatic(`${_1.app.expressApp.get('appPath')}/client`));
    if (_1.app.config.env === 'development' || _1.app.config.env === 'test') {
        _1.app.expressApp.use(morgan('dev'));
        // Static assets for client-side unit tests
        _1.app.expressApp.use(serveStatic(`${_1.app.config.root}/node_modules/jasmine-core/lib/jasmine-core`));
        _1.app.expressApp.use(serveStatic(`${_1.app.config.root}/src/client`));
        _1.app.expressApp.use('/node_modules', serveStatic(`${_1.app.config.root}/node_modules`));
    }
}
exports.ExpressConfig = ExpressConfig;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbmZpZy9leHByZXNzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHOztBQUVILG1CQUFvQixLQUNwQixDQUFDLENBRHdCO0FBQ3pCLE1BQU8sV0FBVyxXQUFXLGNBQWMsQ0FBQyxDQUFDO0FBRTdDLElBQUksVUFBVSxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsRUFDdEMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUU1Qjs7O0dBR0c7QUFDSDtJQUVDLE1BQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDO0lBQ3RDLE1BQUcsQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRTlELDREQUE0RDtJQUM1RCxNQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxNQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQztJQUUzRSxFQUFFLENBQUMsQ0FBQyxNQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsS0FBSyxhQUFhLElBQUksTUFBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLEtBQUssTUFBTSxDQUFDLENBQ2xFLENBQUM7UUFDQSxNQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUVsQywyQ0FBMkM7UUFDM0MsTUFBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEdBQUcsTUFBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLDZDQUE2QyxDQUFDLENBQUMsQ0FBQztRQUNqRyxNQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxXQUFXLENBQUMsR0FBRyxNQUFHLENBQUMsTUFBTSxDQUFDLElBQUksYUFBYSxDQUFDLENBQUMsQ0FBQztRQUNqRSxNQUFHLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsV0FBVyxDQUFDLEdBQUcsTUFBRyxDQUFDLE1BQU0sQ0FBQyxJQUFJLGVBQWUsQ0FBQyxDQUFDLENBQUM7SUFDckYsQ0FBQztBQUVGLENBQUM7QUFsQmUscUJBQWEsZ0JBa0I1QixDQUFBIiwiZmlsZSI6ImNvbmZpZy9leHByZXNzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IEp1c3RpbiBvbiA5LzIvMTYuXG4gKi9cblxuaW1wb3J0IHsgYXBwIH0gZnJvbSAnLi4vJ1xuaW1wb3J0IHNlcnZlU3RhdGljID0gcmVxdWlyZSgnc2VydmUtc3RhdGljJyk7XG5cbmxldCBib2R5UGFyc2VyID0gcmVxdWlyZSgnYm9keS1wYXJzZXInKSxcblx0bW9yZ2FuID0gcmVxdWlyZSgnbW9yZ2FuJyk7XG5cbi8qKlxuICogQ29uZmlndXJlcyBFeHByZXNzIG1pZGRsZXdhcmVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZnVuY3Rpb24gRXhwcmVzc0NvbmZpZygpOnZvaWRcbntcblx0YXBwLmV4cHJlc3NBcHAudXNlKGJvZHlQYXJzZXIuanNvbigpKTtcblx0YXBwLmV4cHJlc3NBcHAudXNlKGJvZHlQYXJzZXIudXJsZW5jb2RlZCh7IGV4dGVuZGVkOiB0cnVlIH0pKTtcblxuXHQvLyBTZXJ2ZSBzdGF0aWMgZmlsZXMgYm90aCBmcm9tIC9zcmMvY2xpZW50IGFuZCAvZGlzdC9jbGllbnRcblx0YXBwLmV4cHJlc3NBcHAudXNlKHNlcnZlU3RhdGljKGAke2FwcC5leHByZXNzQXBwLmdldCgnYXBwUGF0aCcpfS9jbGllbnRgKSk7XG5cblx0aWYgKGFwcC5jb25maWcuZW52ID09PSAnZGV2ZWxvcG1lbnQnIHx8IGFwcC5jb25maWcuZW52ID09PSAndGVzdCcpXG5cdHtcblx0XHRhcHAuZXhwcmVzc0FwcC51c2UobW9yZ2FuKCdkZXYnKSk7XG5cblx0XHQvLyBTdGF0aWMgYXNzZXRzIGZvciBjbGllbnQtc2lkZSB1bml0IHRlc3RzXG5cdFx0YXBwLmV4cHJlc3NBcHAudXNlKHNlcnZlU3RhdGljKGAke2FwcC5jb25maWcucm9vdH0vbm9kZV9tb2R1bGVzL2phc21pbmUtY29yZS9saWIvamFzbWluZS1jb3JlYCkpO1xuXHRcdGFwcC5leHByZXNzQXBwLnVzZShzZXJ2ZVN0YXRpYyhgJHthcHAuY29uZmlnLnJvb3R9L3NyYy9jbGllbnRgKSk7XG5cdFx0YXBwLmV4cHJlc3NBcHAudXNlKCcvbm9kZV9tb2R1bGVzJywgc2VydmVTdGF0aWMoYCR7YXBwLmNvbmZpZy5yb290fS9ub2RlX21vZHVsZXNgKSk7XG5cdH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
